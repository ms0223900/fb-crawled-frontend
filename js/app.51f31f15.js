(function(e){function t(t){for(var a,r,i=t[0],l=t[1],s=t[2],u=0,b=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&b.push(c[r][0]),c[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==c[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},c={app:0},o=[];function r(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"36d304e2"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=c[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=c[e]=[t,a]}));t.push(n[2]=a);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(e);var s=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,n[1](s)}c[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/fb-crawled-frontend/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},2239:function(e,t,n){"use strict";n("4c6b")},"23c4":function(e,t,n){},"2a3f":function(e,t,n){"use strict";n("43aa")},"43aa":function(e,t,n){},"4c6b":function(e,t,n){},"70dc":function(e,t,n){"use strict";n("7d28")},7535:function(e,t,n){"use strict";n("f155")},"7ca9":function(e,t,n){"use strict";n("ca5f")},"7d28":function(e,t,n){},b5b2:function(e,t,n){"use strict";n("23c4")},ca5f:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function c(e,t){var n=Object(a["x"])("router-view");return Object(a["p"])(),Object(a["d"])(n)}n("70dc");const o={};o.render=c;var r=o,i=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),l={class:"postpage-wrapper"},s=Object(a["g"])("h1",null,"Fb爬文列表",-1),u={key:1},d={class:"checkbox-wrapper"},b=Object(a["g"])("hr",null,null,-1);function p(e,t,n,c,o,r){var i=Object(a["x"])("EmptyMessage"),p=Object(a["x"])("Checkbox"),g=Object(a["x"])("PostList");return Object(a["p"])(),Object(a["d"])("div",l,[s,e.postPageState.state.loading?(Object(a["p"])(),Object(a["d"])(i,{key:0,message:"Loading..."})):Object(a["e"])("",!0),e.postPageState.state.queriedPosts?(Object(a["p"])(),Object(a["d"])("div",u,[Object(a["g"])("p",null,Object(a["z"])("資料更新時間: ".concat(e.postPageState.createdAt)),1),Object(a["g"])("div",d,[Object(a["g"])(p,{labelName:"過濾今天貼文",modelValue:e.postPageState.isFilteringTodayToggle,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.postPageState.isFilteringTodayToggle=t})},null,8,["modelValue"]),Object(a["g"])(p,{labelName:"過濾貼文內有連結",modelValue:e.postPageState.isFilteringHaveLinksToggle,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.postPageState.isFilteringHaveLinksToggle=t})},null,8,["modelValue"]),Object(a["g"])(p,{labelName:"過濾已點擊連結之貼文",modelValue:e.postPageState.isHideClickedLinkToggle,"onUpdate:modelValue":[t[3]||(t[3]=function(t){return e.postPageState.isHideClickedLinkToggle=t}),t[4]||(t[4]=function(){return e.postPageState.handleToggleHideClickedLink()})]},null,8,["modelValue"])]),b,Object(a["g"])("div",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(e.postPageState.allFetchedFeeds,(function(e,t){return Object(a["p"])(),Object(a["d"])(g,{key:t,postListData:e},null,8,["postListData"])})),128))])])):Object(a["e"])("",!0)])}var g=n("d4ec"),f=n("bee2"),O=n("262e"),j=n("2caf"),v=n("9ab4"),h=n("ce1f"),m=n("5530"),k=n("1da1"),y=(n("96cf"),n("d81d"),n("2591")),P={fixDataFromDatabase:function(e){return Object(m["a"])(Object(m["a"])({},e),{},{allFetchedFeeds:e.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{allExtractedStories:e.allExtractedStories?e.allExtractedStories:[]})}))})}},L=P,w=Object({NODE_ENV:"production",BASE_URL:"/fb-crawled-frontend/"}).FIREBASE_API_KEY,S={apiKey:w,authDomain:"fb-crawled.firebaseapp.com",databaseURL:"https://fb-crawled-default-rtdb.firebaseio.com",storageBucket:"fb-crawled.appspot.com"};y["a"].initializeApp(S);var x=y["a"].database(),T=x.ref(),F=function(){try{return T.child("crawled-data").get().then((function(e){if(e.exists()){var t=e.val(),n=L.fixDataFromDatabase(t);return console.log(n),n}console.log("No data available")}))}catch(e){return Promise.resolve(void 0)}},C=F,D=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(a["v"])(e),n=function(){t.value=!t.value};return{toggle:t,handleToggle:n}},_=D,E=n("2909"),H=(n("4de4"),{filterByConditions:function(e,t){var n=Object(E["a"])(e);return t.isFilteringHaveLinks&&(n=n.filter((function(e){return e.metaOptions.haveLinks}))),t.isFilteringToday&&(n=n.filter((function(e){return e.metaOptions.isToday}))),n}}),V=H,z=n("5502"),M=function(){var e=Object(z["b"])(),t=_(!0),n=t.toggle,c=_(!0),o=c.toggle,r=Object(a["b"])((function(){return e.state.isHideClickedLink})),i=Object(a["u"])({loading:!1,queriedPosts:void 0}),l=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.loading=!0,e.next=3,C();case 3:t=e.sent,n=t?Object(m["a"])(Object(m["a"])({},t),{},{allFetchedFeeds:t.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{posts:e.allExtractedStories})}))}):void 0,i.queriedPosts=n,i.loading=!1;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){return e.dispatch("handleToggleHideClickedLink")},u=Object(a["b"])((function(){return i.queriedPosts?new Date(i.queriedPosts.creationTime).toLocaleString():""})),d=Object(a["b"])((function(){return i.queriedPosts?i.queriedPosts.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{posts:e.allExtractedStories?V.filterByConditions(e.allExtractedStories,{isFilteringToday:n.value,isFilteringHaveLinks:o.value}):[]})})):[]}));return console.log(d),{state:i,createdAt:u,allFetchedFeeds:d,isFilteringTodayToggle:n,isFilteringHaveLinksToggle:o,isHideClickedLinkToggle:r,handleQueryPosts:l,handleToggleHideClickedLink:s}},q=M,N=Object(a["F"])("data-v-bb381c88");Object(a["t"])("data-v-bb381c88");var A={key:0,class:"post-list-wrapper"},I={key:1,class:"item-wrapper"};Object(a["q"])();var B=N((function(e,t,n,c,o,r){var i=Object(a["x"])("EmptyMessage"),l=Object(a["x"])("PostItem");return e.shouldShowPosts?(Object(a["p"])(),Object(a["d"])("div",A,[Object(a["g"])("h2",null,Object(a["z"])(e.postListData.profileName),1),e.shouldShowPosts?(Object(a["p"])(),Object(a["d"])("div",I,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(e.postListData.posts,(function(e,t){return Object(a["p"])(),Object(a["d"])(l,{key:t,singlePostData:e},null,8,["singlePostData"])})),128))])):(Object(a["p"])(),Object(a["d"])(i,{key:0,message:"無符合條件貼文"}))])):Object(a["e"])("",!0)})),R=(n("9911"),n("b0c0"),Object(a["F"])("data-v-b65290e8"));Object(a["t"])("data-v-b65290e8");var U={class:"post-item-wrapper col-4"},J={class:"post-item"},K={key:0},Q=Object(a["g"])("hr",null,null,-1),$={class:"story-message-wrapper"},Y=Object(a["g"])("hr",null,null,-1);Object(a["q"])();var G=R((function(e,t,n,c,o,r){return Object(a["p"])(),Object(a["d"])("div",U,[Object(a["D"])(Object(a["g"])("div",J,[Object(a["g"])("div",null,[Object(a["g"])("p",null,Object(a["z"])(e.singlePostData.creationTime.timeLocaleStr),1)]),Object(a["g"])("div",null,[Object(a["g"])("a",{href:e.singlePostData.postLink.link,target:"_blank",onClick:t[1]||(t[1]=function(){var t;return e.state.handleToggle&&(t=e.state).handleToggle.apply(t,arguments)}),onMouseup:t[2]||(t[2]=Object(a["E"])((function(){var t;return e.state.handleToggle&&(t=e.state).handleToggle.apply(t,arguments)}),["middle"]))},Object(a["z"])(e.singlePostData.postLink.name),41,["href"])]),e.singlePostData.links.links?(Object(a["p"])(),Object(a["d"])("div",K,[Object(a["g"])("h3",null,Object(a["z"])(e.singlePostData.links.name),1),Object(a["g"])("div",null,[Object(a["g"])("div",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(e.singlePostData.links.links,(function(e,t){return Object(a["p"])(),Object(a["d"])("a",{key:t,href:e,target:"_blank"},Object(a["z"])(e),9,["href"])})),128))])])])):Object(a["e"])("",!0),Q,Object(a["g"])("div",$,[Object(a["g"])("p",null,Object(a["z"])(e.singlePostData.storyMessageText.text),1)]),Y,Object(a["g"])("div",null,[Object(a["g"])("p",null,Object(a["z"])(e.feedbackText),1)])],512),[[a["B"],!e.state.shouldHideClickedPost]])])})),W=(n("99af"),n("5c40")),X=function(){var e=Object(z["b"])(),t=_(),n=Object(a["b"])((function(){return e.state.isHideClickedLink})),c=Object(a["b"])((function(){return n.value&&!t.toggle.value}));return Object(m["a"])({shouldHideClickedPost:c},t)},Z=X,ee=function(e){Object(O["a"])(n,e);var t=Object(j["a"])(n);function n(){var e;return Object(g["a"])(this,n),e=t.apply(this,arguments),e.feedbackText=Object(W["d"])((function(){var t=e.singlePostData.feedback,n=t.reactionCount,a=t.shareCount;return"按讚數: ".concat(n,", 分享數: ").concat(a)})),e.state=Object(h["c"])((function(){return Z()})),e}return n}(h["b"]);ee=Object(v["__decorate"])([Object(h["a"])({props:{singlePostData:Object}})],ee);var te=ee;n("7ca9");te.render=G,te.__scopeId="data-v-b65290e8";var ne=te,ae=Object(a["F"])("data-v-e0355b48"),ce=ae((function(e,t,n,c,o,r){return Object(a["p"])(),Object(a["d"])("div",null,[Object(a["g"])("h2",null,Object(a["z"])(n.message||"Empty"),1)])})),oe={name:"EmptyMessage",props:{message:String}};n("b5b2");oe.render=ce,oe.__scopeId="data-v-e0355b48";var re=oe,ie=function(e){Object(O["a"])(n,e);var t=Object(j["a"])(n);function n(){return Object(g["a"])(this,n),t.apply(this,arguments)}return Object(f["a"])(n,[{key:"shouldShowPosts",get:function(){return this.postListData.posts.length>0}},{key:"created",value:function(){this.$watch("postListData",(function(e,t){console.log(e)}))}}]),n}(h["b"]);ie=Object(v["__decorate"])([Object(h["a"])({name:"PostList",props:{postListData:{profileName:String,posts:Array}},components:{PostItem:ne,EmptyMessage:re}})],ie);var le=ie;n("2a3f");le.render=B,le.__scopeId="data-v-bb381c88";var se=le,ue=Object(a["F"])("data-v-84ab385c"),de=ue((function(e,t,n,c,o,r){return Object(a["p"])(),Object(a["d"])("label",null,[Object(a["g"])("input",{type:"checkbox",checked:n.modelValue,onChange:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.checked)})},null,40,["checked"]),Object(a["f"])(" "+Object(a["z"])(n.labelName),1)])})),be={name:"Checkbox",props:{modelValue:Boolean,labelName:String},emits:["on-change-checkbox"]};n("2239");be.render=de,be.__scopeId="data-v-84ab385c";var pe=be,ge=function(e){Object(O["a"])(n,e);var t=Object(j["a"])(n);function n(){var e;return Object(g["a"])(this,n),e=t.apply(this,arguments),e.postPageState=Object(h["c"])((function(){return q()})),e}return Object(f["a"])(n,[{key:"created",value:function(){this.postPageState.handleQueryPosts()}}]),n}(h["b"]);ge=Object(v["__decorate"])([Object(h["a"])({name:"PostPage",components:{PostList:se,Checkbox:pe,EmptyMessage:re}})],ge);var fe=ge;n("7535");fe.render=p;var Oe=fe,je=(n("dfb1"),[{path:"/",name:"Home",component:Oe},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]),ve=Object(i["a"])({history:Object(i["b"])("/fb-crawled-frontend/"),routes:je}),he=ve,me=Object(z["a"])({state:{isHideClickedLink:!0},mutations:{toggleHideClickedLink:function(e){e.isHideClickedLink=!e.isHideClickedLink}},actions:{handleToggleHideClickedLink:function(e){e.commit("toggleHideClickedLink")}},modules:{}});Object(a["c"])(r).use(me).use(he).mount("#app")},dfb1:function(e,t,n){},f155:function(e,t,n){}});
//# sourceMappingURL=app.51f31f15.js.map