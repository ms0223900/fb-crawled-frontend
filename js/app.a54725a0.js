(function(e){function t(t){for(var n,o,i=t[0],s=t[1],l=t[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&d.push(c[o][0]),c[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==c[s]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},c={app:0},r=[];function o(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"28450915"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],a=c[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=n);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=o(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=c[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,a[1](l)}c[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/fb-crawled-frontend/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var b=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},2239:function(e,t,a){"use strict";a("4c6b")},"23c4":function(e,t,a){},"2a3f":function(e,t,a){"use strict";a("43aa")},"3e4b":function(e,t,a){"use strict";a("6f87")},"43aa":function(e,t,a){},"4c6b":function(e,t,a){},"6f87":function(e,t,a){},"70dc":function(e,t,a){"use strict";a("7d28")},"7d28":function(e,t,a){},"86d8":function(e,t,a){},b5b2:function(e,t,a){"use strict";a("23c4")},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23");function c(e,t){var a=Object(n["x"])("router-view");return Object(n["p"])(),Object(n["d"])(a)}a("70dc");const r={};r.render=c;var o=r,i=(a("d3b7"),a("3ca3"),a("ddb0"),a("6c02")),s={class:"postpage-wrapper"},l=Object(n["g"])("h1",null,"Fb爬文列表",-1),u={key:1},b={class:"checkbox-wrapper"},d=Object(n["g"])("hr",null,null,-1);function p(e,t,a,c,r,o){var i=Object(n["x"])("EmptyMessage"),p=Object(n["x"])("Checkbox"),O=Object(n["x"])("PostList");return Object(n["p"])(),Object(n["d"])("div",s,[l,e.postPageState.state.loading?(Object(n["p"])(),Object(n["d"])(i,{key:0,message:"Loading..."})):Object(n["e"])("",!0),e.postPageState.state.queriedPosts?(Object(n["p"])(),Object(n["d"])("div",u,[Object(n["g"])("p",null,Object(n["z"])("資料更新時間: ".concat(e.postPageState.createdAt)),1),Object(n["g"])("div",b,[Object(n["g"])(p,{labelName:"過濾今天貼文",modelValue:e.postPageState.isFilteringTodayToggle,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.postPageState.isFilteringTodayToggle=t})},null,8,["modelValue"]),Object(n["g"])(p,{labelName:"過濾貼文內有連結",modelValue:e.postPageState.isFilteringHaveLinksToggle,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.postPageState.isFilteringHaveLinksToggle=t})},null,8,["modelValue"])]),d,Object(n["g"])("div",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.postPageState.allFetchedFeeds,(function(e,t){return Object(n["p"])(),Object(n["d"])(O,{key:t,postListData:e},null,8,["postListData"])})),128))])])):Object(n["e"])("",!0)])}var O=a("d4ec"),f=a("bee2"),j=a("262e"),g=a("2caf"),v=a("9ab4"),h=a("ce1f"),m=a("5530"),y=a("1da1"),P=(a("96cf"),a("d81d"),a("2591")),k={fixDataFromDatabase:function(e){return Object(m["a"])(Object(m["a"])({},e),{},{allFetchedFeeds:e.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{allExtractedStories:e.allExtractedStories?e.allExtractedStories:[]})}))})}},w=k,x=Object({NODE_ENV:"production",BASE_URL:"/fb-crawled-frontend/"}).FIREBASE_API_KEY,S={apiKey:x,authDomain:"fb-crawled.firebaseapp.com",databaseURL:"https://fb-crawled-default-rtdb.firebaseio.com",storageBucket:"fb-crawled.appspot.com"};P["a"].initializeApp(S);var F=P["a"].database(),_=F.ref(),D=function(){try{return _.child("crawled-data").get().then((function(e){if(e.exists()){var t=e.val(),a=w.fixDataFromDatabase(t);return console.log(a),a}console.log("No data available")}))}catch(e){return Promise.resolve(void 0)}},L=D,E=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(n["v"])(e);return{toggle:t}},T=E,C=a("2909"),z=(a("4de4"),{filterByConditions:function(e,t){var a=Object(C["a"])(e);return t.isFilteringHaveLinks&&(a=a.filter((function(e){return e.metaOptions.haveLinks}))),t.isFilteringToday&&(a=a.filter((function(e){return e.metaOptions.isToday}))),a}}),q=z,M=function(){var e=T(!0),t=e.toggle,a=T(!0),c=a.toggle,r=Object(n["u"])({loading:!1,queriedPosts:void 0}),o=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.loading=!0,e.next=3,L();case 3:t=e.sent,a=t?Object(m["a"])(Object(m["a"])({},t),{},{allFetchedFeeds:t.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{posts:e.allExtractedStories})}))}):void 0,r.queriedPosts=a,r.loading=!1;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(n["b"])((function(){return r.queriedPosts?new Date(r.queriedPosts.creationTime).toLocaleString():""})),s=Object(n["b"])((function(){return r.queriedPosts?r.queriedPosts.allFetchedFeeds.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{posts:e.allExtractedStories?q.filterByConditions(e.allExtractedStories,{isFilteringToday:t.value,isFilteringHaveLinks:c.value}):[]})})):[]}));return console.log(s),{state:r,createdAt:i,allFetchedFeeds:s,isFilteringTodayToggle:t,isFilteringHaveLinksToggle:c,handleQueryPosts:o}},V=M,A=Object(n["C"])("data-v-bb381c88");Object(n["t"])("data-v-bb381c88");var N={key:0,class:"post-list-wrapper"},I={key:1,class:"item-wrapper"};Object(n["q"])();var B=A((function(e,t,a,c,r,o){var i=Object(n["x"])("EmptyMessage"),s=Object(n["x"])("PostItem");return e.shouldShowPosts?(Object(n["p"])(),Object(n["d"])("div",N,[Object(n["g"])("h2",null,Object(n["z"])(e.postListData.profileName),1),e.shouldShowPosts?(Object(n["p"])(),Object(n["d"])("div",I,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.postListData.posts,(function(e,t){return Object(n["p"])(),Object(n["d"])(s,{key:t,singlePostData:e},null,8,["singlePostData"])})),128))])):(Object(n["p"])(),Object(n["d"])(i,{key:0,message:"無符合條件貼文"}))])):Object(n["e"])("",!0)})),H=(a("9911"),a("b0c0"),Object(n["C"])("data-v-4c34aa7a"));Object(n["t"])("data-v-4c34aa7a");var R={class:"post-item-wrapper col-4"},U={class:"post-item"},J={key:0},K=Object(n["g"])("hr",null,null,-1),Q={class:"story-message-wrapper"},$=Object(n["g"])("hr",null,null,-1);Object(n["q"])();var Y=H((function(e,t,a,c,r,o){return Object(n["p"])(),Object(n["d"])("div",R,[Object(n["g"])("div",U,[Object(n["g"])("div",null,[Object(n["g"])("p",null,Object(n["z"])(e.singlePostData.creationTime.timeLocaleStr),1)]),Object(n["g"])("div",null,[Object(n["g"])("a",{href:e.singlePostData.postLink.link,target:"_blank"},Object(n["z"])(e.singlePostData.postLink.name),9,["href"])]),e.singlePostData.links.links?(Object(n["p"])(),Object(n["d"])("div",J,[Object(n["g"])("h3",null,Object(n["z"])(e.singlePostData.links.name),1),Object(n["g"])("div",null,[Object(n["g"])("div",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.singlePostData.links.links,(function(e,t){return Object(n["p"])(),Object(n["d"])("a",{key:t,href:e,target:"_blank"},Object(n["z"])(e),9,["href"])})),128))])])])):Object(n["e"])("",!0),K,Object(n["g"])("div",Q,[Object(n["g"])("p",null,Object(n["z"])(e.singlePostData.storyMessageText.text),1)]),$,Object(n["g"])("div",null,[Object(n["g"])("p",null,Object(n["z"])(e.feedbackText),1)])])])})),G=(a("99af"),a("5c40")),W=function(e){Object(j["a"])(a,e);var t=Object(g["a"])(a);function a(){var e;return Object(O["a"])(this,a),e=t.apply(this,arguments),e.feedbackText=Object(G["d"])((function(){var t=e.singlePostData.feedback,a=t.reactionCount,n=t.shareCount;return"按讚數: ".concat(a,", 分享數: ").concat(n)})),e}return a}(h["b"]);W=Object(v["__decorate"])([Object(h["a"])({props:{singlePostData:Object}})],W);var X=W;a("3e4b");X.render=Y,X.__scopeId="data-v-4c34aa7a";var Z=X,ee=Object(n["C"])("data-v-e0355b48"),te=ee((function(e,t,a,c,r,o){return Object(n["p"])(),Object(n["d"])("div",null,[Object(n["g"])("h2",null,Object(n["z"])(a.message||"Empty"),1)])})),ae={name:"EmptyMessage",props:{message:String}};a("b5b2");ae.render=te,ae.__scopeId="data-v-e0355b48";var ne=ae,ce=function(e){Object(j["a"])(a,e);var t=Object(g["a"])(a);function a(){return Object(O["a"])(this,a),t.apply(this,arguments)}return Object(f["a"])(a,[{key:"shouldShowPosts",get:function(){return this.postListData.posts.length>0}},{key:"created",value:function(){this.$watch("postListData",(function(e,t){console.log(e)}))}}]),a}(h["b"]);ce=Object(v["__decorate"])([Object(h["a"])({name:"PostList",props:{postListData:{profileName:String,posts:Array}},components:{PostItem:Z,EmptyMessage:ne}})],ce);var re=ce;a("2a3f");re.render=B,re.__scopeId="data-v-bb381c88";var oe=re,ie=Object(n["C"])("data-v-84ab385c"),se=ie((function(e,t,a,c,r,o){return Object(n["p"])(),Object(n["d"])("label",null,[Object(n["g"])("input",{type:"checkbox",checked:a.modelValue,onChange:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.checked)})},null,40,["checked"]),Object(n["f"])(" "+Object(n["z"])(a.labelName),1)])})),le={name:"Checkbox",props:{modelValue:Boolean,labelName:String},emits:["on-change-checkbox"]};a("2239");le.render=se,le.__scopeId="data-v-84ab385c";var ue=le,be=function(e){Object(j["a"])(a,e);var t=Object(g["a"])(a);function a(){var e;return Object(O["a"])(this,a),e=t.apply(this,arguments),e.postPageState=Object(h["c"])((function(){return V()})),e}return Object(f["a"])(a,[{key:"created",value:function(){this.postPageState.handleQueryPosts()}}]),a}(h["b"]);be=Object(v["__decorate"])([Object(h["a"])({name:"PostPage",components:{PostList:oe,Checkbox:ue,EmptyMessage:ne}})],be);var de=be;a("cda4");de.render=p;var pe=de,Oe=(a("dfb1"),[{path:"/",name:"Home",component:pe},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]),fe=Object(i["a"])({history:Object(i["b"])("/fb-crawled-frontend/"),routes:Oe}),je=fe,ge=a("5502"),ve=Object(ge["a"])({state:{},mutations:{},actions:{},modules:{}});Object(n["c"])(o).use(ve).use(je).mount("#app")},cda4:function(e,t,a){"use strict";a("86d8")},dfb1:function(e,t,a){}});
//# sourceMappingURL=app.a54725a0.js.map